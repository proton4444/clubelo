# ==============================================================================
# ENVIRONMENT CONFIGURATION FOR CLUBELO REFACTORED SERVER
# ==============================================================================
#
# This file documents all environment variables supported by the application.
# Copy this to .env and fill in values appropriate for your environment.
#
# Environments:
# - LOCAL: Local development with local PostgreSQL
# - TEST: Automated testing with test database
# - STAGING: Staging deployment (Vercel Preview)
# - PRODUCTION: Production deployment (Vercel)
#

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL connection string
# Format: postgresql://[USER[:PASSWORD]@][HOST][:PORT][/DATABASE][?OPTIONS]
#
# Local development (Unix socket - recommended):
# DATABASE_URL="postgresql://postgres@/clubelo?host=/var/run/postgresql"
#
# Local development (TCP):
# DATABASE_URL="postgresql://postgres:password@localhost:5432/clubelo"
#
# Docker Postgres:
# DATABASE_URL="postgresql://postgres:postgres@postgres:5432/clubelo"
#
# Vercel Postgres (provided by Vercel):
# DATABASE_URL="postgres://user:password@ep-xxxx-xxxx.compute.amazonaws.com:5432/dbname"
#
# Testing (CI/CD):
# DATABASE_URL="postgresql://postgres:postgres@localhost:5432/clubelo_test"
#
DATABASE_URL="postgresql://postgres@/clubelo?host=/var/run/postgresql"

# ==============================================================================
# SERVER CONFIGURATION
# ==============================================================================

# Node environment
# Values: development, test, staging, production
NODE_ENV="development"

# Server port
# Local: 3001
# Vercel: 3001 (handled automatically)
PORT=3001

# ==============================================================================
# EXTERNAL APIs & SERVICES
# ==============================================================================

# ClubElo API base URL (no trailing slash)
# This is the source for football club Elo ratings
CLUBELO_API_BASE="http://api.clubelo.com"

# ClubElo API timeout (milliseconds)
# Default: 30000 (30 seconds)
CLUBELO_API_TIMEOUT="30000"

# ClubElo API max retries for failed requests
# Default: 3
CLUBELO_API_RETRIES="3"

# ==============================================================================
# CRON JOBS & SCHEDULED TASKS
# ==============================================================================

# Secret key for protecting cron endpoints
# Keep this secure and complex - used to authenticate scheduled task requests
# Format: any alphanumeric string (min 32 characters recommended)
CRON_SECRET="your-secret-key-for-scheduled-tasks-min-32-chars"

# ==============================================================================
# TESTING CONFIGURATION
# ==============================================================================

# Playwright E2E test base URL
# Local: http://localhost:3001
# Vercel: https://your-app.vercel.app
PLAYWRIGHT_TEST_BASE_URL="http://localhost:3001"

# Playwright timeout (milliseconds)
PLAYWRIGHT_TIMEOUT="30000"

# ==============================================================================
# LOGGING & MONITORING
# ==============================================================================

# Log level
# Values: error, warn, info, debug, trace
LOG_LEVEL="info"

# Enable request logging
# Values: true, false
REQUEST_LOGGING="true"

# ==============================================================================
# PERFORMANCE & OPTIMIZATION
# ==============================================================================

# Database connection pool size
# Recommended: 10-20 for production, 5 for local dev
DB_POOL_MIN="2"
DB_POOL_MAX="10"

# Cache TTL for rankings (milliseconds)
# Default: 300000 (5 minutes)
RANKINGS_CACHE_TTL="300000"

# Maximum number of clubs to load at startup
# Default: 630 (all available clubs)
MAX_CLUBS_LOAD="630"

# ==============================================================================
# VERCEL-SPECIFIC CONFIGURATION
# ==============================================================================

# Vercel environment
# Automatically set by Vercel:
# - VERCEL_ENV: production, preview, or development
# - VERCEL_URL: Deployment URL
# - VERCEL_GIT_COMMIT_SHA: Git commit hash
# These should NOT be manually set in .env

# ==============================================================================
# GITHUB ACTIONS CI/CD CONFIGURATION
# ==============================================================================

# GitHub Actions automatically sets CI=true
# This affects:
# - Playwright worker count (1 on CI, auto locally)
# - Test retries (2 on CI, 0 locally)
# - Server startup (expects running server on CI)

# ==============================================================================
# SECURITY
# ==============================================================================

# CORS allowed origins (comma-separated)
# Local: http://localhost:3000,http://localhost:3001
# Production: https://yourdomain.com
CORS_ORIGINS="http://localhost:3000,http://localhost:3001"

# Rate limiting (requests per minute)
RATE_LIMIT_WINDOW="60"
RATE_LIMIT_MAX_REQUESTS="100"

# ==============================================================================
# EXAMPLE CONFIGURATIONS
# ==============================================================================

# LOCAL DEVELOPMENT
# ─────────────────────────────────────────────────────────────────────────────
# NODE_ENV=development
# PORT=3001
# DATABASE_URL=postgresql://postgres@/clubelo?host=/var/run/postgresql
# CRON_SECRET=dev-secret-key-not-for-production
# LOG_LEVEL=debug
# REQUEST_LOGGING=true
# PLAYWRIGHT_TEST_BASE_URL=http://localhost:3001

# TESTING (GitHub Actions)
# ─────────────────────────────────────────────────────────────────────────────
# NODE_ENV=test
# PORT=3001
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/clubelo_test
# CRON_SECRET=test-secret-key
# LOG_LEVEL=warn
# REQUEST_LOGGING=false
# PLAYWRIGHT_TEST_BASE_URL=http://localhost:3001

# PRODUCTION (Vercel)
# ─────────────────────────────────────────────────────────────────────────────
# NODE_ENV=production
# PORT=3001
# DATABASE_URL=<provided by Vercel Postgres>
# CRON_SECRET=<use strong secret>
# LOG_LEVEL=info
# REQUEST_LOGGING=false
# DB_POOL_MAX=20
# RANKINGS_CACHE_TTL=600000

# ==============================================================================
# NOTES
# ==============================================================================
#
# 1. DATABASE_URL is required for all environments
# 2. CRON_SECRET should be rotated periodically in production
# 3. Keep .env files with sensitive data out of version control
# 4. For Vercel, set environment variables in Dashboard → Settings
# 5. Local .env file is NOT uploaded to GitHub (check .gitignore)
# 6. Document any new environment variables in this file
#
